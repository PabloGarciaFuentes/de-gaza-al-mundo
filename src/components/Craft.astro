---
/**
 * CRAFT/ARTESANÍA SECTION COMPONENT
 * 
 * Purpose: Showcase handmade Palestinian-themed crafts sold to support humanitarian aid
 * Business Model: 100% of proceeds go directly to food and medicine for Gaza families
 * 
 * Key Features:
 * - Two-column responsive layout (text + product showcase)
 * - Product catalog with 4 craft categories
 * - Mobile carousel slider with arrow navigation
 * - Desktop masonry-style grid layout
 * - Direct link to external Canva catalog
 * - Automatic image optimization with Astro Image component (WebP format)
 * 
 * Product Categories:
 * - Baberos (Bibs) - Red themed
 * - Llaveros (Keychains) - Black themed
 * - Camisetas (T-shirts) - Green themed
 * - Libros (Books) - White themed
 * 
 * Layout Strategy:
 * - Mobile: Text first, then horizontal scrolling carousel (2 items visible)
 * - Desktop: Side-by-side with offset masonry grid effect
 * 
 * Image Optimization (Phase 1):
 * - Uses Astro's <Image> component for automatic optimization
 * - Converts PNG/JPG to WebP format (80% quality)
 * - Resizes to 300x300px (square) and 300x400px (portrait)
 * - Reduces image sizes by ~60-94% (574KB → 95KB total)
 * - 8 image instances (4 mobile grid + 4 desktop masonry)
 * 
 * Design Philosophy:
 * - Emphasize authentic Palestinian cultural designs
 * - Direct impact messaging (100% to aid)
 * - Visual product showcase before CTA
 * - Palestinian flag colors throughout
 */

// === IMAGE IMPORTS ===
// Astro Image component for automatic optimization to WebP format
// Enables automatic format conversion, resizing, and quality optimization
import { Image } from 'astro:assets';

// Product images for craft catalog showcase
// Imported as ImageMetadata objects (not strings) for Astro Image optimization
import CamisetaImg from '../assets/images/craft/camiseta_2.png';
import LlaverosImg from '../assets/images/craft/llaveros_1.jpg';
import BaberosImg from '../assets/images/craft/baberos_1.jpg';
import LibrosImg from '../assets/images/craft/libro_1.png';

/**
 * CRAFT SECTION DATA STRUCTURE
 * 
 * Configuration object for craft/artisan section:
 * - header: Section title, badge, and value proposition
 * - features: 2 key selling points (authentic designs, real impact)
 * - products: 4 product categories with images and styling
 * - cta: External link to full catalog on Canva
 * 
 * Content Strategy:
 * - Emotional appeal (heart, dedication)
 * - Cultural authenticity (Palestinian designs)
 * - Transparency (100% goes to aid)
 * - Easy purchase path (Canva catalog)
 */
const defaultData = {
  // === SECTION HEADER ===
  header: {
    badge: "Artesanía Solidaria", // Solidarity crafts identifier
    title: "Apoya con el Corazón,<br />Lleva Palestina Contigo", // Emotional + cultural connection
    description: "Nuestros voluntarios y familias elaboran con dedicación hermosas piezas artesanales. Cada pulsera, llavero y camiseta que adquieres es un donativo directo que se transforma en ayuda humanitaria."
  },

  // === VALUE PROPOSITIONS ===
  // 2 key features highlighting authenticity and impact
  features: [
    {
      icon: "palette", // Design/artisan icon
      iconBg: "bg-black/5", // Subtle black background
      iconColor: "text-black", // Palestinian black
      title: "Diseños Auténticos",
      description: "Inspirados en la cultura y los colores de nuestra tierra: rojo, negro, blanco y verde."
    },
    {
      icon: "favorite", // Heart icon for impact
      iconBg: "bg-[#236E1E]/10", // Subtle green background
      iconColor: "text-[#236E1E]", // Palestinian green
      title: "Impacto Real",
      description: "El 100% de los beneficios se destina a la compra de alimentos y medicinas."
    }
  ],

  // === PRODUCT CATALOG ===
  // 4 craft categories with Palestinian flag color theming
  // 
  // IMPORTANT CHANGE (Phase 1 Optimization):
  // - BEFORE: Used .src strings (e.g., BaberosImg.src)
  // - AFTER: Uses full ImageMetadata objects (e.g., BaberosImg)
  // - Reason: Astro <Image> component requires full objects for optimization
  // - Result: Automatic WebP conversion in build time
  products: [
    {
      image: BaberosImg,
      alt: "Babero con diseño palestino",
      category: "Baberos",
      categoryColor: "bg-[#931a24]", // Palestinian red
      aspectRatio: "aspect-3/4" // Portrait orientation
    },
    {
      image: LlaverosImg,
      alt: "Llaveros con diseño palestino",
      category: "Llaveros",
      categoryColor: "bg-black", // Palestinian black
      aspectRatio: "aspect-square" // Square orientation
    },
    {
      image: CamisetaImg,
      alt: "White t-shirt with Palestinian embroidery design",
      category: "Camisetas",
      categoryColor: "bg-[#236E1E]", // Palestinian green
      aspectRatio: "aspect-square" // Square orientation
    },
    {
      image: LibrosImg,
      alt: "Libro con temática palestina",
      category: "Libros",
      categoryColor: "bg-white", // White from flag
      categoryTextColor: "text-black", // Black text for white background
      aspectRatio: "aspect-3/4" // Portrait orientation
    }
  ],

  // === CALL TO ACTION ===
  // External link to full product catalog
  cta: {
    icon: "shopping_bag",
    label: "Ver Catálogo",
    url: "https://www.canva.com/design/DAG5dynujUo/01FSx7j2KWv66Oc9XuNWnw/view?utlId=h6587fed21c"
  }
};

const { data = defaultData } = Astro.props;
---

<!-- ============================================= -->
<!-- CRAFT/ARTISAN SECTION                         -->
<!-- ============================================= -->
<section
  id="craft-section" class="relative bg-[#f8f6f6] py-16 md:py-24 border-t border-[#e5e7eb] scroll-mt-10"
>
  <div class="w-full max-w-7xl mx-auto px-4 sm:px-10">
    <!-- Two-column layout: text left, products right -->
    <div class="flex flex-col lg:flex-row items-center gap-12 lg:gap-16">
      
      <!-- ============================================= -->
      <!-- LEFT COLUMN: TEXT CONTENT & FEATURES          -->
      <!-- ============================================= -->
      <div class="lg:w-1/2 order-2 lg:order-1">
        
        <!-- Section Badge -->
        <!-- Red badge with dot indicator -->
        <span
          class="text-[#931a24] font-bold tracking-wider text-sm uppercase mb-2 flex items-center gap-2"
        >
          <span class="w-2 h-2 rounded-full bg-[#931a24]"></span>
          {data.header.badge}
        </span>

        <!-- Section Title -->
        <h2
          class="text-[#171212] text-3xl md:text-4xl font-black leading-tight mb-6"
          set:html={data.header.title}
        >
        </h2>

        <!-- Description -->
        <p class="text-[#6b6b6b] text-lg leading-relaxed mb-8">
          {data.header.description}
        </p>

        <!-- Feature Cards -->
        <!-- 2 value propositions: Authentic Designs + Real Impact -->
        <div class="space-y-6">
          {data.features.map((feature: { iconBg: any; iconColor: any; icon: unknown; title: unknown; description: unknown; }) => (
            <div class="flex gap-4 items-start">
              <div
                class={`w-12 h-12 rounded-full ${feature.iconBg} flex items-center justify-center ${feature.iconColor} shrink-0`}
              >
                <span class="material-symbols-outlined text-2xl" style="font-variation-settings: 'FILL' 1;">{feature.icon}</span>
              </div>
              <div>
                <h3 class="text-lg font-bold text-[#171212] mb-1">
                  {feature.title}
                </h3>
                <p class="text-[#6b6b6b]">
                  {feature.description}
                </p>
              </div>
            </div>
          ))}
        </div>

        <!-- ============================================= -->
        <!-- MOBILE PRODUCT GRID                           -->
        <!-- ============================================= -->
        <!-- Visible only on mobile/tablet, 2x2 grid layout -->
        <div class="mt-8 lg:hidden">
          <div class="grid grid-cols-2 gap-4">
            {data.products.map((product: { image: any; alt: string; categoryColor: any; categoryTextColor: any; category: unknown; }) => (
              <div class="group relative overflow-hidden rounded-xl aspect-4/5 shadow-sm">
                <Image
                  src={product.image}
                  alt={product.alt}
                  class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
                  loading="lazy"
                  width={300}
                  height={375}
                  format="webp"
                  quality={80}
                />
                <div class="absolute bottom-3 left-3">
                  <span class={`inline-block px-2 py-1 ${product.categoryColor} ${product.categoryTextColor || 'text-white'} font-bold rounded-md shadow-md text-xs`}>
                    {product.category}
                  </span>
                </div>
              </div>
            ))}
          </div>
        </div>

        <!-- Call-to-Action Button -->
        <!-- Black button linking to external Canva catalog -->
        <div class="mt-10 flex gap-4 justify-center lg:justify-start">
          <a
            href={data.cta.url}
            target="_blank"
            rel="noopener noreferrer"
            class="inline-flex items-center justify-center gap-2 rounded-lg h-12 px-6 bg-black text-white hover:bg-gray-800 transition-colors font-bold shadow-lg cursor-pointer"
          >
            <span class="material-symbols-outlined">{data.cta.icon}</span>
            {data.cta.label}
          </a>
        </div>
      </div>

      <!-- ============================================= -->
      <!-- RIGHT COLUMN: DESKTOP PRODUCT SHOWCASE        -->
      <!-- ============================================= -->
      <!-- Hidden on mobile, masonry-style grid on desktop -->
      <div class="lg:w-1/2 order-1 lg:order-2 hidden lg:block">
        <!-- 2-column grid with offset effect -->
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          
          <!-- Left Column: Offset downward for visual interest -->
          <div class="space-y-4 lg:translate-y-8">
            <div
              class="relative rounded-xl overflow-hidden shadow-lg aspect-3/4 group border-4 border-white min-h-62.5"
            >
              <Image
                src={data.products[0].image}
                alt={data.products[0].alt}
                class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"
                loading="lazy"
                width={300}
                height={400}
                format="webp"
                quality={80}
              />
              <div class="absolute bottom-4 left-4">
                <span
                  class={`inline-block px-4 py-2 ${data.products[0].categoryColor} text-white font-bold rounded-lg shadow-md text-sm`}
                >
                  {data.products[0].category}
                </span>
              </div>
            </div>
            <div
              class="relative rounded-xl overflow-hidden shadow-lg aspect-square group border-4 border-white min-h-50"
            >
              <Image
                src={data.products[1].image}
                alt={data.products[1].alt}
                class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"
                loading="lazy"
                width={300}
                height={300}
                format="webp"
                quality={80}
              />
              <div class="absolute bottom-4 left-4">
                <span
                  class={`inline-block px-4 py-2 ${data.products[1].categoryColor} text-white font-bold rounded-lg shadow-md text-sm`}
                >
                  {data.products[1].category}
                </span>
              </div>
            </div>
          </div>

          <!-- Right Column: Normal positioning -->
          <div class="space-y-4">
            <div
              class="relative rounded-xl overflow-hidden shadow-lg aspect-square group border-4 border-white min-h-50"
            >
              <Image
                src={data.products[2].image}
                alt={data.products[2].alt}
                class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"
                format="webp"
                quality={80}
                width={300}
                height={300}
              />
              <div class="absolute bottom-4 left-4">
                <span
                  class={`inline-block px-4 py-2 ${data.products[2].categoryColor} text-white font-bold rounded-lg shadow-md text-sm`}
                >
                  {data.products[2].category}
                </span>
              </div>
            </div>
            <div
              class="relative rounded-xl overflow-hidden shadow-lg aspect-3/4 group border-4 border-white min-h-62.5"
            >
              <Image
                src={data.products[3].image}
                alt={data.products[3].alt}
                class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"
                format="webp"
                quality={80}
                width={300}
                height={400}
              />
              <div class="absolute bottom-4 left-4">
                <span
                  class={`inline-block px-4 py-2 ${data.products[3].categoryColor} ${data.products[3].categoryTextColor || 'text-white'} font-bold rounded-lg shadow-md text-sm`}
                >
                  {data.products[3].category}
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- ============================================= -->
<!-- STYLES                                        -->
<!-- ============================================= -->
<style>
  /* Hide scrollbars for cleaner mobile carousel experience */
  /* Note: Currently using grid layout, but styles preserved for potential future carousel */
  /* Mantenemos los estilos básicos que podrían ser necesarios */
</style>
